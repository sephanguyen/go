pid_file: "/var/run/nats/nats.pid" # PID file shared with configuration reloader.

debug: false
trace: false
lame_duck_duration: "{{ .Values.jetstream.terminationGracePeriodSeconds }}s"

// enables jetstream, an empty block will enable and use defaults
jetstream {
    store_dir: /data/jetstream
    max_mem: 4GiB
    max_file: 10GiB
}
port = 4223
server_name = $POD_NAME
http_port = 8223

{{- if .Values.jetstream.cluster.enabled }}
cluster {
    port: 6223
    name: {{ include "nats-jetstream.fullname" . }}
    routes = [
        {{ include "nats-jetstream.clusterRoutes" . }}
    ]
    cluster_advertise: $CLUSTER_ADVERTISE
    connect_retries: 30
}
{{- end }}

include ../decrypted/nats.secrets.conf
accounts {
    A: {
        jetstream: enabled,
        users: [
            {
                nkey: $controller_nkey
            },
            {
                user: "Bob",
                password: $bob_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created", 
                            "UserDeviceToken.Updated",
                            "$JS.API.CONSUMER.INFO.cloudconvertjobevent.*",
                            "$JS.API.CONSUMER.DELETE.cloudconvertjobevent.*",
                            "$JS.API.CONSUMER.CREATE.cloudconvertjobevent",
                            "$JS.API.CONSUMER.DURABLE.CREATE.cloudconvertjobevent.*",
                            "$JS.ACK.cloudconvertjobevent.>",
                            "Lesson.Created",
                            "Lesson.Updated",
                            "Lesson.Deleted",
                            "SyncLesson.Synced",
                            "$JS.API.CONSUMER.INFO.synclesson.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.synclesson.*",
                            "$JS.API.CONSUMER.DELETE.synclesson.*",
                            "$JS.ACK.synclesson.>",
                            "Class.*",
                            "$JS.API.CONSUMER.INFO.lesson.*",
                            "$JS.API.CONSUMER.DELETE.lesson.*",
                            "$JS.API.CONSUMER.CREATE.lesson",
                            "$JS.API.CONSUMER.DURABLE.CREATE.lesson.*",
                            "$JS.ACK.lesson.>",
                            "LessonChat.Synced",
                            "LearningObjective.Created",
                            "SyncGrade.upsert",
                            "SyncLocationType.Upserted",
                            "SyncLocation.Upserted",
                            "chat_migrate.resource_path"
                            "$JS.API.CONSUMER.INFO.studentpackage.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentpackage.*",
                            "$JS.API.CONSUMER.DELETE.studentpackage.*",
                            "$JS.ACK.studentpackage.>",

                            "$JS.API.CONSUMER.INFO.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DELETE.debeziumincrementalsnapshot.*",
                            "$JS.ACK.debeziumincrementalsnapshot.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"
                        ]
                    }
                }
            },
            {
                user: "Enigma",
                password: $enigma_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created",
                            "SyncUserCourse.Synced",
                            "SyncUserRegistration.Synced",
                            "SyncMasterRegistration.Synced",
                            "CloudConvertJobEvent.Updated"
                        ],
                        deny: ["$JS.API.CONSUMER.INFO.*", "$JS.API.CONSUMER.CREATE.*", "$JS.API.CONSUMER.DURABLE.CREATE.*"]
                    },
                    subscribe: ["_INBOX.>",
                                "deliver.>"]
                }
            },
            {
                user: "Yasuo",
                password: $yasuo_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created", 
                            "UserDeviceToken.Updated",
                            "$JS.API.CONSUMER.INFO.syncusercourse.*",
                            "$JS.API.CONSUMER.CREATE.syncusercourse",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncusercourse.*",
                            "$JS.API.CONSUMER.DELETE.syncusercourse.*",
                            "$JS.ACK.syncusercourse.>",
                            "$JS.API.CONSUMER.INFO.syncuserregistration.*",
                            "$JS.API.CONSUMER.CREATE.syncuserregistration",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncuserregistration.*",
                            "$JS.API.CONSUMER.DELETE.syncuserregistration.*",
                            "$JS.ACK.syncuserregistration.>",
                            "$JS.API.CONSUMER.INFO.syncmasterregistration.*",
                            "$JS.API.CONSUMER.CREATE.syncmasterregistration",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncmasterregistration.*",
                            "$JS.API.CONSUMER.DELETE.syncmasterregistration.*",
                            "$JS.ACK.syncmasterregistration.>",
                            "User.Created",
                            "Lesson.Created",
                            "Class.*",
                            "SyncStudentPackage.Synced",
                            "SyncStudentLessonsConversations.Synced"
                            "$JS.API.CONSUMER.CREATE.notification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.notification.*",
                            "$JS.API.CONSUMER.INFO.notification.*",
                            "$JS.API.CONSUMER.DELETE.notification.*",
                            "$JS.ACK.notification.>",
                            "Notification.Created"

                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "Tom",
                password: $tom_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO",
                            "$JS.API.STREAM.>",
                            "$JS.API.CONSUMER.LIST.*",
                            "$JS.API.CONSUMER.NAMES.*",
                            "ActivityLog.Created",

                            "chat_migrate.>",
                            "$JS.API.CONSUMER.INFO.chat_migrate.*",
                            "$JS.API.CONSUMER.CREATE.chat_migrate",
                            "$JS.API.CONSUMER.DURABLE.CREATE.chat_migrate.*",
                            "$JS.API.CONSUMER.DELETE.chat_migrate.*",
                            "$JS.ACK.chat_migrate.>"

                            "chat.chat.>",
                            "$JS.API.CONSUMER.INFO.chat.*",
                            "$JS.API.CONSUMER.CREATE.chat",
                            "$JS.API.CONSUMER.DURABLE.CREATE.chat.*",
                            "$JS.API.CONSUMER.DELETE.chat.*",
                            "$JS.ACK.chat.>"

                            "$JS.API.CONSUMER.INFO.userdevicetoken.*",
                            "$JS.API.CONSUMER.CREATE.userdevicetoken",
                            "$JS.API.CONSUMER.DURABLE.CREATE.userdevicetoken.*",
                             "$JS.API.CONSUMER.DELETE.userdevicetoken.*",
                            "$JS.ACK.userdevicetoken.>",

                            "$JS.API.CONSUMER.INFO.user.*",
                            "$JS.API.CONSUMER.CREATE.user",
                            "$JS.API.CONSUMER.DURABLE.CREATE.user.*",
                            "$JS.API.CONSUMER.DELETE.user.*",
                            "$JS.ACK.user.>",

                            "$JS.API.CONSUMER.INFO.lesson.*",
                            "$JS.API.CONSUMER.CREATE.lesson",
                            "$JS.API.CONSUMER.DURABLE.CREATE.lesson.*",
                            "$JS.API.CONSUMER.DELETE.lesson.*",
                            "$JS.ACK.lesson.>",

                            "$JS.API.CONSUMER.INFO.lessonchat.*",
                            "$JS.API.CONSUMER.CREATE.lessonchat",
                            "$JS.API.CONSUMER.DURABLE.CREATE.lessonchat.*",
                            "$JS.API.CONSUMER.DELETE.lessonchat.*",
                            "$JS.ACK.lessonchat.>",

                            "ChatMessage.Created",
                            "ChatMessage.Deleted",
                            "$JS.API.CONSUMER.CREATE.chatmessage",
                            "$JS.API.CONSUMER.DURABLE.CREATE.chatmessage.*",
                            "$JS.API.CONSUMER.INFO.chatmessage.*",
                            "$JS.API.CONSUMER.DELETE.chatmessage.*",
                            "$JS.ACK.chatmessage.>",

                            "$JS.API.CONSUMER.CREATE.syncstudentlessonsconversations",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncstudentlessonsconversations.*",
                            "$JS.API.CONSUMER.INFO.syncstudentlessonsconversations.*",
                            "$JS.API.CONSUMER.DELETE.syncstudentlessonsconversations.*",
                            "$JS.ACK.syncstudentlessonsconversations.>",

                            
                            "$JS.API.CONSUMER.INFO.esconversation.*",
                            "$JS.API.CONSUMER.CREATE.esconversation",
                            "$JS.API.CONSUMER.DURABLE.CREATE.esconversation.*",
                            "$JS.API.CONSUMER.DELETE.esconversation.*",
                            "$JS.ACK.esconversation.>",

                            "$JS.API.CONSUMER.INFO.staff.*",
                            "$JS.API.CONSUMER.CREATE.staff",
                            "$JS.API.CONSUMER.DURABLE.CREATE.staff.*",
                            "$JS.API.CONSUMER.DELETE.staff.*",
                            "$JS.ACK.staff.>",

                            "$JS.API.CONSUMER.INFO.usergroup.*",
                            "$JS.API.CONSUMER.CREATE.usergroup",
                            "$JS.API.CONSUMER.DURABLE.CREATE.usergroup.*",
                            "$JS.API.CONSUMER.DELETE.usergroup.*",
                            "$JS.ACK.usergroup.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "Eureka",
                password: $eureka_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created",
                            "$JS.API.CONSUMER.INFO.syncmasterregistration.*",
                            "$JS.API.CONSUMER.CREATE.syncmasterregistration",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncmasterregistration.*",
                            "$JS.API.CONSUMER.DELETE.syncmasterregistration.*",
                            "$JS.ACK.syncmasterregistration.>",
                            "$JS.API.CONSUMER.INFO.studentpackage.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentpackage.*",
                            "$JS.API.CONSUMER.DELETE.studentpackage.*",
                            "$JS.ACK.studentpackage.>",
                            "$JS.API.CONSUMER.INFO.studentpackagev2.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentpackagev2.*",
                            "$JS.API.CONSUMER.DELETE.studentpackagev2.*",
                            "$JS.ACK.studentpackagev2.>",
                            "$JS.API.CONSUMER.INFO.learningobjectives.*",
                            "$JS.API.CONSUMER.CREATE.learningobjectives",
                            "$JS.API.CONSUMER.DURABLE.CREATE.learningobjectives.*",
                            "$JS.API.CONSUMER.DELETE.learningobjectives.*",
                            "$JS.ACK.learningobjectives.>"
                            "$JS.API.CONSUMER.DURABLE.CREATE.class.*",
                            "$JS.API.CONSUMER.INFO.class.*",
                            "$JS.API.CONSUMER.DELETE.class.*",
                            "$JS.ACK.class.>"
                            "$JS.API.CONSUMER.INFO.syncstudentpackage.*",
                            "$JS.ACK.syncstudentpackage.>"
                            "$JS.API.CONSUMER.DELETE.syncstudentpackage.*",
                            "$JS.API.CONSUMER.CREATE.syncstudentpackage",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncstudentpackage.*",
                            "Assignments.Created",
                            "$JS.API.CONSUMER.CREATE.assignments",
                            "$JS.API.CONSUMER.DURABLE.CREATE.assignments.*",
                            "$JS.API.CONSUMER.INFO.assignments.*",
                            "$JS.API.CONSUMER.DELETE.assignments.*",
                            "$JS.ACK.assignments.>",
                            "ESConversation.CourseStudent.Elastic",
                            "$JS.API.CONSUMER.CREATE.notification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.notification.*",
                            "$JS.API.CONSUMER.INFO.notification.*",
                            "$JS.API.CONSUMER.DELETE.notification.*",
                            "$JS.ACK.notification.>",
                            "Notification.Created",
                            "LearningObjective.Created",
                            "$JS.API.CONSUMER.CREATE.mastermgmtclass.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.mastermgmtclass.*",
                            "$JS.API.CONSUMER.INFO.mastermgmtclass.*",
                            "$JS.API.CONSUMER.DELETE.mastermgmtclass.*",
                            "$JS.ACK.mastermgmtclass.>",
                            "StudyPlanItems.Imported",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studyplanitems.*",
                            "$JS.API.CONSUMER.INFO.studyplanitems.*",
                            "$JS.API.CONSUMER.DELETE.studyplanitems.*",
                            "$JS.ACK.studyplanitems.>"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "Fatima",
                password: $fatima_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created",
                            "StudentPackage.Upserted",
                            "StudentPackageV2.Upserted",
                            "$JS.API.CONSUMER.INFO.syncstudentpackage.*",
                            "$JS.API.CONSUMER.CREATE.syncstudentpackage",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncstudentpackage.*",
                            "$JS.API.CONSUMER.DELETE.syncstudentpackage.*",
                            "$JS.ACK.syncstudentpackage.>"

                            "$JS.API.CONSUMER.INFO.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DELETE.debeziumincrementalsnapshot.*",
                            "$JS.ACK.debeziumincrementalsnapshot.>",

                            "SyncJprepStudentPackage.Synced",
                        ],
                        deny: ["$JS.API.CONSUMER.INFO.*", "$JS.API.CONSUMER.CREATE.*", "$JS.API.CONSUMER.DURABLE.CREATE.*"]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "Hephaestus",
                password: $hephaestus_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO",
                            "$JS.API.STREAM.>",
                            "$JS.API.CONSUMER.LIST.*",
                            "$JS.API.CONSUMER.NAMES.*",
                            "$JS.API.CONSUMER.CREATE.debeziumincrementalsnapshot",
                            "$JS.API.CONSUMER.DURABLE.CREATE.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.INFO.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DELETE.debeziumincrementalsnapshot.*",
                            "$JS.ACK.debeziumincrementalsnapshot.>"
                            "DebeziumIncrementalSnapshot.Send",
                        ],
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "Payment",
                password: $payment_password,
                permissions: {
                    publish: {
                        allow: [
                        "$JS.API.INFO",
                        "$JS.API.STREAM.>",
                        "$JS.API.CONSUMER.*",

                        "$JS.API.CONSUMER.INFO.syncgrade.durable-sync-grade-upsert",
                        "$JS.ACK.syncgrade.>",
                        "$JS.API.CONSUMER.CREATE.syncgrade",
                        "$JS.API.CONSUMER.DURABLE.CREATE.syncgrade.*",
                        "$JS.API.CONSUMER.DELETE.syncgrade.*",

                        "$JS.API.CONSUMER.INFO.synclocation.durable-synclocation",
                        "$JS.ACK.synclocation.>",
                        "$JS.API.CONSUMER.CREATE.synclocation",
                        "$JS.API.CONSUMER.DURABLE.CREATE.synclocation.*",
                        "$JS.API.CONSUMER.DELETE.synclocation.*",

                        "$JS.API.CONSUMER.INFO.updatestudentproduct.*",
                        "$JS.API.CONSUMER.DURABLE.CREATE.updatestudentproduct.*",
                        "$JS.API.CONSUMER.DELETE.updatestudentproduct.*",
                        "$JS.ACK.updatestudentproduct.>",

                        "OrderEventLog.Created",
                        "ActivityLog.Created",
                        "StudentCourseEvent.Sync",
                        "StudentPackage.Upserted",
                        "StudentPackageV2.Upserted",
                        "OrderWithProductInfoLog.Created",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "Shamir",
                password: $shamir_password,
                permissions: {
                    publish: {
                        allow: ["$JS.API.INFO", "$JS.API.STREAM.>", "$JS.API.CONSUMER.*", "ActivityLog.Created"],
                        deny: ["$JS.API.CONSUMER.INFO.*", "$JS.API.CONSUMER.CREATE.*", "$JS.API.CONSUMER.DURABLE.CREATE.*"]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {{- if eq "local" .Values.environment }}
            {
                user: "Gandalf",
                password: $gandalf_password,
            },
            {{- end }}
            {
                user: "Zeus",
                password: $zeus_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO",
                            "$JS.API.STREAM.>",
                            "$JS.API.CONSUMER.LIST.*",
                            "$JS.API.CONSUMER.NAMES.*",
                            "$JS.API.CONSUMER.CREATE.activitylog",
                            "$JS.API.CONSUMER.DURABLE.CREATE.activitylog.*",
                            "$JS.API.CONSUMER.INFO.activitylog.*",
                            "$JS.API.CONSUMER.DELETE.activitylog.*",
                            "$JS.ACK.activitylog.>"
                            "$JS.API.CONSUMER.MSG.NEXT.activitylog.>"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "UserMgmt",
                password: $usermgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "$JS.API.CONSUMER.INFO.importstudent.durable-import-student",
                            "$JS.API.CONSUMER.DURABLE.CREATE.importstudent.durable-import-student",
                            "$JS.ACK.importstudent.>",

                            "$JS.API.CONSUMER.INFO.synclocation.durable-synclocation-org-creation",
                            "$JS.API.CONSUMER.DELETE.synclocation.durable-synclocation-org-creation",
                            "$JS.API.CONSUMER.DURABLE.CREATE.synclocation.durable-synclocation-org-creation",
                            "$JS.ACK.synclocation.>",

                            "$JS.API.CONSUMER.INFO.syncuserregistration.*",
                            "$JS.API.CONSUMER.CREATE.syncuserregistration",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncuserregistration.*",
                            "$JS.API.CONSUMER.DELETE.syncuserregistration.*",
                            "$JS.ACK.syncuserregistration.>",

                            "$JS.API.CONSUMER.INFO.enrollmentstatusassignment.durable-enrollment-status-assignment",
                            "$JS.API.CONSUMER.DURABLE.CREATE.enrollmentstatusassignment.durable-enrollment-status-assignment",
                            "$JS.API.CONSUMER.DELETE.enrollmentstatusassignment.durable-enrollment-status-assignment",
                            "$JS.ACK.enrollmentstatusassignment.>",

                            "ActivityLog.Created",
                            "User.Created",
                            "User.Updated",
                            "Staff.UpsertTimesheetConfig",
                            "Staff.Upserted"
                            "UserDeviceToken.Updated",
                            "Organization.Created",
                            "ImportStudent.Upserted",
                            "UserGroup.Upserted",

                            "$JS.API.CONSUMER.INFO.ordereventlog.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.ordereventlog.*",
                            "$JS.API.CONSUMER.DELETE.ordereventlog.*",
                            "$JS.ACK.ordereventlog.>"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "EntryExitMgmt",
                password: $entryexitmgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "$JS.API.CONSUMER.INFO.user.*",
                            "$JS.API.CONSUMER.CREATE.user",
                            "$JS.API.CONSUMER.DURABLE.CREATE.user.*",
                            "$JS.API.CONSUMER.DELETE.user.*",
                            "$JS.ACK.user.>",
                            "$JS.API.CONSUMER.INFO.notification.*",
                            "$JS.API.CONSUMER.CREATE.notification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.notification.*",
                            "$JS.API.CONSUMER.DELETE.notification.*",
                            "$JS.ACK.notification.>",
                            "Notification.Created",
                            "ActivityLog.Created",
                            "$JS.API.CONSUMER.MSG.NEXT.user.>"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
             {
                user: "InvoiceMgmt",
                password: $invoicemgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "$JS.API.CONSUMER.INFO.user.*",
                            "$JS.API.CONSUMER.CREATE.user",
                            "$JS.API.CONSUMER.DURABLE.CREATE.user.*",
                            "$JS.API.CONSUMER.DELETE.user.*",
                            "$JS.ACK.user.>",
                            "$JS.API.CONSUMER.INFO.notification.*",
                            "$JS.API.CONSUMER.CREATE.notification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.notification.*",
                            "$JS.API.CONSUMER.DELETE.notification.*",
                            "$JS.ACK.notification.>",
                            "Notification.Created",
                            "ActivityLog.Created",
                            "$JS.API.CONSUMER.MSG.NEXT.user.>"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "MasterMgmt",
                password: $mastermgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "SyncLocationType.Upserted",
                            "SyncLocation.Upserted",
                            "$JS.API.CONSUMER.INFO.organization.durable-organization-created",
                            "$JS.ACK.organization.>",   
                            "$JS.API.CONSUMER.DURABLE.CREATE.organization.durable-organization-created",
                            "Organization.Created",
                            "ActivityLog.Created",
                            "MasterMgmt.Class.Upserted",
                            "MasterMgmt.ReserveClass.Upserted",
                            "$JS.API.CONSUMER.INFO.studentpackagev2.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentpackagev2.*",
                            "$JS.API.CONSUMER.DELETE.studentpackagev2.*",
                            "$JS.ACK.studentpackagev2.>",

                            "$JS.API.CONSUMER.INFO.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.debeziumincrementalsnapshot.*",
                            "$JS.API.CONSUMER.DELETE.debeziumincrementalsnapshot.*",
                            "$JS.ACK.debeziumincrementalsnapshot.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {
                user: "LessonMgmt",
                password: $lessonmgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>",  
                            "$JS.API.CONSUMER.*", 
                            "Lesson.Created",
                            "Lesson.Updated",
                            "Lesson.Deleted",
                            "SyncLesson.Synced",
                            "$JS.API.CONSUMER.INFO.synclesson.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.synclesson.*",
                            "$JS.API.CONSUMER.DELETE.synclesson.*",
                            "$JS.ACK.synclesson.>",
                            "$JS.API.CONSUMER.INFO.user.*",
                            "$JS.API.CONSUMER.CREATE.user",
                            "$JS.API.CONSUMER.DURABLE.CREATE.user.*",
                            "$JS.API.CONSUMER.DELETE.user.*",
                            "$JS.ACK.user.>",
                            "ActivityLog.Created",
                            "$JS.API.CONSUMER.INFO.studentpackagev2.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentpackagev2.*",
                            "$JS.API.CONSUMER.DELETE.studentpackagev2.*",
                            "$JS.ACK.studentpackagev2.>",
                            "$JS.API.CONSUMER.INFO.timesheetlesson.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.timesheetlesson.*",
                            "$JS.API.CONSUMER.DELETE.timesheetlesson.*",
                            "$JS.ACK.timesheetlesson.>",
                            "$JS.API.CONSUMER.CREATE.mastermgmtclass.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.mastermgmtclass.*",
                            "$JS.API.CONSUMER.INFO.mastermgmtclass.*",
                            "$JS.API.CONSUMER.DELETE.mastermgmtclass.*",
                            "$JS.ACK.mastermgmtclass.>",
                            "$JS.API.CONSUMER.INFO.studentcourseeventsync.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentcourseeventsync.*",
                            "$JS.API.CONSUMER.DELETE.studentcourseeventsync.*",
                            "$JS.ACK.studentcourseeventsync.>",
                            "EnrollmentStatusAssignment.Created",
                            "$JS.API.CONSUMER.CREATE.mastermgmtreserveclass.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.mastermgmtreserveclass.*",
                            "$JS.API.CONSUMER.INFO.mastermgmtreserveclass.*",
                            "$JS.API.CONSUMER.DELETE.mastermgmtreserveclass.*",
                            "$JS.ACK.mastermgmtreserveclass.>"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"
                        ]
                    }
                }
            },
            {
                user: "VirtualClassroom",
                password: $virtualclassroom_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO",
                            "$JS.API.STREAM.>",
                            "$JS.API.CONSUMER.*",
                            "ActivityLog.Created",
                            "Lesson.Created",
                            "Lesson.Updated",
                            "Lesson.Deleted",
                            "$JS.API.CONSUMER.INFO.lesson.*",
                            "$JS.API.CONSUMER.DELETE.lesson.*",
                            "$JS.API.CONSUMER.CREATE.lesson",
                            "$JS.API.CONSUMER.DURABLE.CREATE.lesson.*",
                            "$JS.ACK.lesson.>",
                            "UpcomingLiveLessonNotification.Created",
                            "$JS.API.CONSUMER.INFO.upcominglivelessonnotification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.upcominglivelessonnotification.*",
                            "$JS.API.CONSUMER.DELETE.upcominglivelessonnotification.*",
                            "$JS.ACK.upcominglivelessonnotification.>",
                            "Notification.Created",
                            "$JS.API.CONSUMER.INFO.notification.*",
                            "$JS.API.CONSUMER.CREATE.notification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.notification.*",
                            "$JS.API.CONSUMER.DELETE.notification.*",
                            "$JS.ACK.notification.>",
                            "LiveRoom.Updated",
                            "$JS.API.CONSUMER.INFO.liveroom.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.liveroom.*",
                            "$JS.API.CONSUMER.DELETE.liveroom.*",
                            "$JS.ACK.liveroom.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"
                        ]
                    }
                }
            },
            {
                user: "Timesheet",
                password: $timesheet_password,
                permissions: {
                    publish: {
                        allow: [
                           "$JS.API.INFO",
                           "$JS.API.STREAM.>",
                           "$JS.API.CONSUMER.*",
                           "ActivityLog.Created",
                           "Lesson.Created",
                           "Lesson.Updated",
                           "TimesheetLesson.Locked",
                           "$JS.API.CONSUMER.INFO.lesson.*",
                           "$JS.API.CONSUMER.DELETE.lesson.*",
                           "$JS.API.CONSUMER.CREATE.lesson",
                           "$JS.API.CONSUMER.DURABLE.CREATE.lesson.*",
                           "$JS.ACK.lesson.>",
                           
                           "TimesheetActionLog.Created",
                           "$JS.API.CONSUMER.INFO.timesheetactionlog.*",
                           "$JS.API.CONSUMER.DURABLE.CREATE.timesheetactionlog.*",
                           "$JS.API.CONSUMER.DELETE.timesheetactionlog.*",
                           "$JS.ACK.timesheetactionlog.>",

                            "TimesheetAutoCreateFlag.Updated",
                            "$JS.API.CONSUMER.INFO.timesheetautocreateflag.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.timesheetautocreateflag.*",
                            "$JS.API.CONSUMER.DELETE.timesheetautocreateflag.*",
                            "$JS.ACK.timesheetautocreateflag.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"
                        ]
                    }
                }
            },
            {
                user: "NotificationMgmt",
                password: $notificationmgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created"
                            "$JS.API.CONSUMER.CREATE.notification.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.notification.*",
                            "$JS.API.CONSUMER.INFO.notification.*",
                            "$JS.API.CONSUMER.DELETE.notification.*",
                            "$JS.ACK.notification.>",
                            "Notification.Created",
                            "$JS.API.CONSUMER.INFO.studentpackagev2.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.studentpackagev2.*",
                            "$JS.API.CONSUMER.DELETE.studentpackagev2.*",
                            "$JS.ACK.studentpackagev2.>",
                            "UserDeviceToken.Updated",

                            "SyncJprepStudentPackage.Synced",
                            "$JS.API.CONSUMER.INFO.syncjprepstudentpackage.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.syncjprepstudentpackage.*",
                            "$JS.API.CONSUMER.DELETE.syncjprepstudentpackage.*",
                            "$JS.ACK.syncjprepstudentpackage.>",

                            "Class.Upserted",
                            "$JS.API.CONSUMER.INFO.class.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.class.*",
                            "$JS.API.CONSUMER.DELETE.class.*",
                            "$JS.ACK.class.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {{- if or (eq "local" .Values.environment) (eq "stag" .Values.environment) (eq "uat" .Values.environment) }}
            {
                user: "Spike",
                password: $spike_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created", 
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {{- end }}
            {{- if or (eq "local" .Values.environment) (eq "stag" .Values.environment) }}
            {
                user: "Conversationmgmt",
                password: $conversationmgmt_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "ActivityLog.Created",

                            "$JS.API.CONSUMER.INFO.user.*",
                            "$JS.API.CONSUMER.CREATE.user",
                            "$JS.API.CONSUMER.DURABLE.CREATE.user.*",
                            "$JS.API.CONSUMER.DELETE.user.*",
                            "$JS.ACK.user.>",

                            "$JS.API.CONSUMER.INFO.staff.*",
                            "$JS.API.CONSUMER.CREATE.staff",
                            "$JS.API.CONSUMER.DURABLE.CREATE.staff.*",
                            "$JS.API.CONSUMER.DELETE.staff.*",
                            "$JS.ACK.staff.>",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {{- end }}
            {{- if or (eq "local" .Values.environment) (eq "stag" .Values.environment) (eq "uat" .Values.environment) }}
            {
                user: "Discount",
                password: $discount_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 

                            "$JS.API.CONSUMER.INFO.orderwithproductinfolog.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.orderwithproductinfolog.*",
                            "$JS.API.CONSUMER.DELETE.orderwithproductinfolog.*",
                            "$JS.ACK.orderwithproductinfolog.>",

                            "UpdateStudentProduct.Created",
                            "ActivityLog.Created",
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {{- end }}
            {
                user: "Fink",
                password: $fink_password,
            },
            {{- if or (eq "local" .Values.environment) (eq "stag" .Values.environment)}}
            {
                user: "Draft",
                password: $draft_password,
                permissions: {
                    publish: {
                        allow: [
                            "$JS.API.INFO", 
                            "$JS.API.STREAM.>", 
                            "$JS.API.CONSUMER.*", 
                            "$JS.API.CONSUMER.INFO.clean_data.*",
                            "$JS.API.CONSUMER.DURABLE.CREATE.clean_data.*",
                            "$JS.API.CONSUMER.DELETE.clean_data.*",
                            "$JS.ACK.clean_data.>",
                            "CleanData.Created"
                        ]
                    },
                    subscribe: {
                        allow: [
                            "_INBOX.>",
                            "deliver.>"    
                        ]
                    }
                }
            },
            {{- end }}
        ]
    }
}
