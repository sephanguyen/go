{{/* vim: set filetype=mustache: */}}

{{/*
util.serviceCredential returns the Google's Service Account Key
that can be used to access GCP resources when bootstrapping in local.

It requires .Values.global.secrets.localDeployKey to be set to decrypt the value.
*/}}
{{- define "util.serviceCredential" -}}
{{- $key := default dict $.Values.global | dig "secrets" "localDeployKey" "" -}}
{{- if not $key -}}
  {{- $key = default dict $.Values.secrets | dig "localDeployKey" "" -}}
{{- end -}}
{{- $key = default "a0d34c998e09443af5118ef6" $key -}}
{{- "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" | decryptAES $key | b64enc -}}
{{- end -}}
