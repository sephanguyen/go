- table:
    schema: public
    name: bank
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - bank_code
      - bank_id
      - bank_name
      - bank_name_phonetic
      - is_archived
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - bank_code
      - bank_id
      - bank_name
      - bank_name_phonetic
      - is_archived
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: bank_account
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - bank_account_holder
      - bank_account_id
      - bank_account_number
      - bank_account_type
      - bank_branch_id
      - bank_id
      - is_verified
      - student_id
      - student_payment_detail_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - bank_account_holder
      - bank_account_id
      - bank_account_number
      - bank_account_type
      - bank_branch_id
      - bank_id
      - is_verified
      - student_id
      - student_payment_detail_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: cities
  array_relationships:
  - name: districts
    using:
      foreign_key_constraint_on:
        column: city_id
        table:
          schema: public
          name: districts
  - name: schools
    using:
      foreign_key_constraint_on:
        column: city_id
        table:
          schema: public
          name: schools
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - city_id
      - country
      - created_at
      - display_order
      - name
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - country
      - display_order
      - city_id
      - name
      - created_at
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - city_id
      - name
      - country
      - created_at
      - updated_at
      - display_order
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: class
  object_relationships:
  - name: course
    using:
      foreign_key_constraint_on: course_id
  - name: location
    using:
      foreign_key_constraint_on: location_id
  array_relationships:
  - name: class_members
    using:
      foreign_key_constraint_on:
        column: class_id
        table:
          schema: public
          name: class_member
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - class_id
      - course_id
      - location_id
      - name
      - created_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - class_id
      - course_id
      - location_id
      - name
      - created_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - class_id
      - course_id
      - location_id
      - name
      - created_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - class_id
      - course_id
      - location_id
      - name
      - created_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - class_id
      - course_id
      - location_id
      - name
      - created_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: class_member
  object_relationships:
  - name: class
    using:
      foreign_key_constraint_on: class_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - class_id
      - class_member_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - class_id
      - class_member_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - class_id
      - class_member_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - class_id
      - class_member_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - class_id
      - class_member_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: conversion_tasks
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - conversion_response
      - created_at
      - resource_path
      - resource_url
      - status
      - task_uuid
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - task_uuid
      - resource_url
      - status
      - conversion_response
      - created_at
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - conversion_response
      - resource_url
      - task_uuid
      - created_at
      - updated_at
      - status
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - task_uuid
      - resource_url
      - status
      - conversion_response
      - created_at
      - updated_at
      - resource_path
      filter:
        resource_path:
          _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - conversion_response
      - resource_path
      - resource_url
      - task_uuid
      - created_at
      - updated_at
      - status
      filter:
        resource_path:
          _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: course_access_paths
  object_relationships:
  - name: course
    using:
      foreign_key_constraint_on: course_id
  - name: location
    using:
      foreign_key_constraint_on: location_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - location_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - location_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - location_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - location_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - course_id
      - created_at
      - location_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: course_type
  array_relationships:
  - name: courses
    using:
      foreign_key_constraint_on:
        column: course_type_id
        table:
          schema: public
          name: courses
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - course_type_id
      - created_at
      - deleted_at
      - name
      - remarks
      - is_archived
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - course_type_id
      - created_at
      - deleted_at
      - name
      - remarks
      - is_archived
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - course_type_id
      - created_at
      - deleted_at
      - name
      - remarks
      - is_archived
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - course_type_id
      - created_at
      - deleted_at
      - name
      - remarks
      - is_archived
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - course_type_id
      - created_at
      - deleted_at
      - name
      - remarks
      - is_archived
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: courses
  object_relationships:
  - name: course_types
    using:
      foreign_key_constraint_on: course_type_id
  - name: school
    using:
      foreign_key_constraint_on: school_id
  array_relationships:
  - name: course_access_paths
    using:
      foreign_key_constraint_on:
        column: course_id
        table:
          schema: public
          name: course_access_paths
  - name: course_subjects
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: course_subject
        column_mapping:
          course_id: course_id
  - name: teacher
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: teacher_by_school_id
        column_mapping:
          school_id: school_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - country
      - course_id
      - course_type
      - course_type_id
      - created_at
      - deleted_at
      - display_order
      - end_date
      - grade
      - icon
      - name
      - preset_study_plan_id
      - school_id
      - start_date
      - status
      - subject
      - teacher_ids
      - teaching_method
      - updated_at
      filter:
        _and:
        - _exists:
            _where:
              _and:
              - user_id:
                  _eq: X-Hasura-User-Id
              - permission_name:
                  _eq: master.course.read
            _table:
              schema: public
              name: granted_permissions
        - deleted_at:
            _is_null: true
        - school_id:
            _in: X-Hasura-School-Ids
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - country
      - course_id
      - course_type
      - course_type_id
      - created_at
      - deleted_at
      - display_order
      - end_date
      - grade
      - icon
      - name
      - preset_study_plan_id
      - school_id
      - start_date
      - status
      - subject
      - teacher_ids
      - teaching_method
      - updated_at
      filter:
        _and:
        - _exists:
            _where:
              _and:
              - user_id:
                  _eq: X-Hasura-User-Id
              - permission_name:
                  _eq: master.course.read
            _table:
              schema: public
              name: granted_permissions
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - country
      - course_id
      - course_type
      - course_type_id
      - created_at
      - deleted_at
      - display_order
      - end_date
      - grade
      - icon
      - name
      - preset_study_plan_id
      - school_id
      - start_date
      - status
      - subject
      - teacher_ids
      - teaching_method
      - updated_at
      filter:
        _and:
        - _exists:
            _where:
              _and:
              - user_id:
                  _eq: X-Hasura-User-Id
              - permission_name:
                  _eq: master.course.read
            _table:
              schema: public
              name: granted_permissions
        - deleted_at:
            _is_null: true
        - school_id:
            _in: X-Hasura-School-Ids
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - country
      - course_id
      - course_type
      - course_type_id
      - created_at
      - deleted_at
      - display_order
      - end_date
      - grade
      - icon
      - name
      - preset_study_plan_id
      - school_id
      - start_date
      - status
      - subject
      - teacher_ids
      - teaching_method
      - updated_at
      filter:
        _and:
        - _exists:
            _where:
              _and:
              - user_id:
                  _eq: X-Hasura-User-Id
              - permission_name:
                  _eq: master.course.read
            _table:
              schema: public
              name: granted_permissions
        - school_id:
            _in: X-Hasura-School-Ids
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - country
      - course_id
      - course_type
      - course_type_id
      - created_at
      - deleted_at
      - display_order
      - end_date
      - grade
      - icon
      - name
      - preset_study_plan_id
      - school_id
      - start_date
      - subject
      - teacher_ids
      - teaching_method
      - updated_at
      filter:
        _and:
        - _exists:
            _where:
              _and:
              - user_id:
                  _eq: X-Hasura-User-Id
              - permission_name:
                  _eq: master.course.read
            _table:
              schema: public
              name: granted_permissions
        - school_id:
            _in: X-Hasura-School-Ids
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: day_info
  insert_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - date
      - day_type_id
      - location_id
      - opening_time
      - status
      - time_zone
      backend_only: false
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - date
      - day_type_id
      - location_id
      - opening_time
      - status
      - time_zone
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - date
      - day_type_id
      - location_id
      - opening_time
      - status
      - time_zone
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - date
      - day_type_id
      - location_id
      - opening_time
      - status
      - time_zone
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - date
      - day_type_id
      - location_id
      - opening_time
      - status
      - time_zone
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  update_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - date
      - day_type_id
      - location_id
      - opening_time
      - status
      - updated_at
      - time_zone
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: day_type
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - day_type_id
      - display_name
      - is_archived
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - day_type_id
      - display_name
      - is_archived
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - day_type_id
      - display_name
      - is_archived
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - day_type_id
      - display_name
      - is_archived
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: districts
  object_relationships:
  - name: city
    using:
      foreign_key_constraint_on: city_id
  array_relationships:
  - name: schools
    using:
      foreign_key_constraint_on:
        column: district_id
        table:
          schema: public
          name: schools
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - city_id
      - country
      - created_at
      - district_id
      - name
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - district_id
      - name
      - country
      - city_id
      - created_at
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - district_id
      - name
      - country
      - city_id
      - created_at
      - updated_at
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: grade
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - grade_id
      - is_archived
      - name
      - partner_internal_id
      - sequence
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - grade_id
      - is_archived
      - name
      - partner_internal_id
      - sequence
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - grade_id
      - is_archived
      - name
      - partner_internal_id
      - sequence
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - grade_id
      - is_archived
      - name
      - partner_internal_id
      - sequence
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - grade_id
      - is_archived
      - name
      - partner_internal_id
      - sequence
      - created_at
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: granted_role
  object_relationships:
  - name: role
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: role
        column_mapping:
          resource_path: resource_path
          role_id: role_id
  - name: user_group
    using:
      foreign_key_constraint_on: user_group_id
  array_relationships:
  - name: granted_role_access_paths
    using:
      foreign_key_constraint_on:
        column: granted_role_id
        table:
          schema: public
          name: granted_role_access_path
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - granted_role_id
      - role_id
      - updated_at
      - user_group_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - granted_role_id
      - role_id
      - updated_at
      - user_group_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: granted_role_access_path
  object_relationships:
  - name: granted_role
    using:
      foreign_key_constraint_on: granted_role_id
  - name: location
    using:
      foreign_key_constraint_on: location_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - granted_role_id
      - location_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - granted_role_id
      - location_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: info_notification_msgs
  array_relationships:
  - name: info_notifications
    using:
      foreign_key_constraint_on:
        column: notification_msg_id
        table:
          schema: public
          name: info_notifications
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - content
      - created_at
      - deleted_at
      - media_ids
      - notification_msg_id
      - title
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - notification_msg_id
      - title
      - content
      - media_ids
      - created_at
      - updated_at
      - deleted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - notification_msg_id
      - title
      - content
      - media_ids
      - created_at
      - updated_at
      - deleted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - notification_msg_id
      - title
      - content
      - media_ids
      - created_at
      - updated_at
      - deleted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: info_notifications
  object_relationships:
  - name: info_notification_msg
    using:
      foreign_key_constraint_on: notification_msg_id
  - name: questionnaire
    using:
      foreign_key_constraint_on: questionnaire_id
  - name: school_admin
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: school_admins
        column_mapping:
          editor_id: school_admin_id
  array_relationships:
  - name: users_info_notifications
    using:
      foreign_key_constraint_on:
        column: notification_id
        table:
          schema: public
          name: users_info_notifications
  - name: info_notifications_access_paths
    using:
      foreign_key_constraint_on:
        column: notification_id
        table:
          schema: public
          name: info_notifications_access_paths
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - created_user_id
      - data
      - deleted_at
      - editor_id
      - event
      - excluded_generic_receiver_ids
      - generic_receiver_ids
      - is_important
      - notification_id
      - notification_msg_id
      - questionnaire_id
      - receiver_ids
      - receiver_names
      - scheduled_at
      - sent_at
      - status
      - target_groups
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - type:
            _eq: NOTIFICATION_TYPE_COMPOSED
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_access_paths:
              info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.read
                - user_id:
                    _eq: X-Hasura-User-Id
          - created_user_id:
              _eq: X-Hasura-User-Id
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - created_user_id
      - data
      - deleted_at
      - editor_id
      - event
      - excluded_generic_receiver_ids
      - generic_receiver_ids
      - is_important
      - notification_id
      - notification_msg_id
      - questionnaire_id
      - receiver_ids
      - receiver_names
      - scheduled_at
      - sent_at
      - status
      - target_groups
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - type:
            _eq: NOTIFICATION_TYPE_COMPOSED
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_access_paths:
              info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.read
                - user_id:
                    _eq: X-Hasura-User-Id
          - created_user_id:
              _eq: X-Hasura-User-Id
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - created_user_id
      - data
      - deleted_at
      - editor_id
      - event
      - excluded_generic_receiver_ids
      - generic_receiver_ids
      - is_important
      - notification_id
      - notification_msg_id
      - questionnaire_id
      - receiver_ids
      - receiver_names
      - scheduled_at
      - sent_at
      - status
      - target_groups
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - type:
            _eq: NOTIFICATION_TYPE_COMPOSED
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_access_paths:
              info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.read
                - user_id:
                    _eq: X-Hasura-User-Id
          - created_user_id:
              _eq: X-Hasura-User-Id
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - created_user_id
      - data
      - deleted_at
      - editor_id
      - event
      - excluded_generic_receiver_ids
      - generic_receiver_ids
      - is_important
      - notification_id
      - notification_msg_id
      - questionnaire_id
      - receiver_ids
      - receiver_names
      - scheduled_at
      - sent_at
      - status
      - target_groups
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - type:
            _eq: NOTIFICATION_TYPE_COMPOSED
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_access_paths:
              info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.read
                - user_id:
                    _eq: X-Hasura-User-Id
          - created_user_id:
              _eq: X-Hasura-User-Id
      allow_aggregations: true
- table:
    schema: public
    name: info_notifications_access_paths
  object_relationships:
  - name: info_notifications_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - notification_id
      - location_id
      - access_path
      - created_at
      - updated_at
      - created_user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_location_permission:
              _and:
              - permission_name:
                  _eq: communication.notification.read
              - user_id:
                  _eq: X-Hasura-User-Id
          - _and:
            - info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.owner
                - user_id:
                    _eq: X-Hasura-User-Id
            - created_user_id:
                _eq: X-Hasura-User-Id
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - notification_id
      - location_id
      - access_path
      - created_at
      - updated_at
      - created_user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_location_permission:
              _and:
              - permission_name:
                  _eq: communication.notification.read
              - user_id:
                  _eq: X-Hasura-User-Id
          - _and:
            - info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.owner
                - user_id:
                    _eq: X-Hasura-User-Id
            - created_user_id:
                _eq: X-Hasura-User-Id
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - notification_id
      - location_id
      - access_path
      - created_at
      - updated_at
      - created_user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_location_permission:
              _and:
              - permission_name:
                  _eq: communication.notification.read
              - user_id:
                  _eq: X-Hasura-User-Id
          - _and:
            - info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.owner
                - user_id:
                    _eq: X-Hasura-User-Id
            - created_user_id:
                _eq: X-Hasura-User-Id
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - notification_id
      - location_id
      - access_path
      - created_at
      - updated_at
      - created_user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - _or:
          - info_notifications_location_permission:
              _and:
              - permission_name:
                  _eq: communication.notification.read
              - user_id:
                  _eq: X-Hasura-User-Id
          - _and:
            - info_notifications_location_permission:
                _and:
                - permission_name:
                    _eq: communication.notification.owner
                - user_id:
                    _eq: X-Hasura-User-Id
            - created_user_id:
                _eq: X-Hasura-User-Id
      allow_aggregations: true
- table:
    schema: public
    name: info_notifications_tags
  object_relationships:
  - name: tags
    using:
      foreign_key_constraint_on: tag_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - notification_id
      - notification_tag_id
      - tag_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - notification_id
      - notification_tag_id
      - tag_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - notification_id
      - notification_tag_id
      - tag_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - notification_id
      - notification_tag_id
      - tag_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: location_types
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - display_name
      - is_archived
      - location_type_id
      - name
      - parent_location_type_id
      - parent_name
      - updated_at
      - level
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - display_name
      - is_archived
      - location_type_id
      - name
      - parent_location_type_id
      - parent_name
      - updated_at
      - level
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - display_name
      - is_archived
      - location_type_id
      - name
      - parent_location_type_id
      - parent_name
      - updated_at
      - level
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - created_at
      - deleted_at
      - display_name
      - location_type_id
      - name
      - parent_name
      - updated_at
      - level
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - deleted_at
      - display_name
      - is_archived
      - location_type_id
      - name
      - parent_location_type_id
      - parent_name
      - updated_at
      - level
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: locations
  object_relationships:
  - name: locations
    using:
      foreign_key_constraint_on: parent_location_id
  - name: location_types
    using:
      foreign_key_constraint_on: location_type
  - name: locations_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  array_relationships:
  - name: course_access_paths
    using:
      foreign_key_constraint_on:
        column: location_id
        table:
          schema: public
          name: course_access_paths
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - access_path
      - created_at
      - deleted_at
      - is_archived
      - location_id
      - location_type
      - name
      - parent_location_id
      - partner_internal_id
      - updated_at
      filter:
        _and:
        - locations_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: master.location.read
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - access_path
      - created_at
      - deleted_at
      - is_archived
      - location_id
      - location_type
      - name
      - parent_location_id
      - partner_internal_id
      - updated_at
      filter:
        _and:
        - locations_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: master.location.read
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - access_path
      - created_at
      - deleted_at
      - is_archived
      - location_id
      - location_type
      - name
      - parent_location_id
      - partner_internal_id
      - updated_at
      filter:
        _and:
        - locations_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: master.location.read
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - created_at
      - deleted_at
      - location_id
      - name
      - updated_at
      filter:
        _and:
        - locations_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: master.location.read
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - access_path
      - created_at
      - deleted_at
      - is_archived
      - location_id
      - location_type
      - name
      - parent_location_id
      - partner_internal_id
      - updated_at
      filter:
        _and:
        - locations_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: master.location.read
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: media
  array_relationships:
  - name: conversion_tasks
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: conversion_tasks
        column_mapping:
          resource: resource_url
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - comments
      - converted_images
      - created_at
      - deleted_at
      - media_id
      - name
      - resource
      - resource_path
      - type
      - updated_at
      - file_size_bytes
      - duration_seconds
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - comments
      - converted_images
      - created_at
      - deleted_at
      - media_id
      - name
      - resource
      - resource_path
      - type
      - updated_at
      - file_size_bytes
      - duration_seconds
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - comments
      - converted_images
      - created_at
      - deleted_at
      - media_id
      - name
      - resource
      - resource_path
      - type
      - updated_at
      - file_size_bytes
      - duration_seconds
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - media_id
      - name
      - resource
      - comments
      - updated_at
      - created_at
      - deleted_at
      - type
      - converted_images
      - resource_path
      - file_size_bytes
      - duration_seconds
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - comments
      - converted_images
      - media_id
      - name
      - resource
      - resource_path
      - type
      - created_at
      - deleted_at
      - updated_at
      - file_size_bytes
      - duration_seconds
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: organizations
  select_permissions:
  - role: anonymous
    permission:
      columns:
      - tenant_id
      - name
      - domain_name
      - logo_url
      - organization_id
      filter: {}
      allow_aggregations: true
  - role: MANABIE
    permission:
      columns:
      - domain_name
      - logo_url
      - name
      - organization_id
      - tenant_id
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: parents
  object_relationships:
  - name: user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          parent_id: user_id
  array_relationships:
  - name: student_parents
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: student_parents
        column_mapping:
          parent_id: parent_id
  - name: user_access_paths
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          parent_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - parent_id
      - school_id
      - updated_at
      filter:
        _and:
        - user_access_paths:
            _and:
            - parents_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.parent.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - parent_id
      - school_id
      - updated_at
      - created_at
      - deleted_at
      filter:
        _and:
        - user_access_paths:
            _and:
            - parents_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.parent.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - school_id
      - parent_id
      - created_at
      - deleted_at
      - updated_at
      filter:
        _and:
        - user_access_paths:
            _and:
            - parents_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.parent.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - school_id
      - parent_id
      - created_at
      - deleted_at
      - updated_at
      filter:
        _and:
        - user_access_paths:
            _and:
            - parents_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.parent.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: prefecture
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - country
      - created_at
      - deleted_at
      - name
      - prefecture_code
      - prefecture_id
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - prefecture_code
      - country
      - name
      - created_at
      - updated_at
      - deleted_at
      - prefecture_id
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - prefecture_code
      - country
      - name
      - created_at
      - updated_at
      - deleted_at
      - prefecture_id
      filter: {}
      allow_aggregations: true
- table:
    schema: public
    name: questionnaire_questions
  object_relationships:
  - name: questionnaire
    using:
      foreign_key_constraint_on: questionnaire_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - choices
      - created_at
      - deleted_at
      - is_required
      - order_index
      - questionnaire_id
      - questionnaire_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - choices
      - created_at
      - deleted_at
      - is_required
      - order_index
      - questionnaire_id
      - questionnaire_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - choices
      - created_at
      - deleted_at
      - is_required
      - order_index
      - questionnaire_id
      - questionnaire_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - choices
      - created_at
      - is_required
      - order_index
      - questionnaire_id
      - questionnaire_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: questionnaire_user_answers
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - answer
      - answer_id
      - deleted_at
      - questionnaire_question_id
      - submitted_at
      - target_id
      - user_id
      - user_notification_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - answer
      - answer_id
      - deleted_at
      - questionnaire_question_id
      - submitted_at
      - target_id
      - user_id
      - user_notification_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - answer
      - answer_id
      - deleted_at
      - questionnaire_question_id
      - submitted_at
      - target_id
      - user_id
      - user_notification_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - answer
      - answer_id
      - questionnaire_question_id
      - submitted_at
      - target_id
      - user_id
      - user_notification_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: questionnaires
  array_relationships:
  - name: info_notifications
    using:
      foreign_key_constraint_on:
        column: questionnaire_id
        table:
          schema: public
          name: info_notifications
  - name: questionnaire_questions
    using:
      foreign_key_constraint_on:
        column: questionnaire_id
        table:
          schema: public
          name: questionnaire_questions
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - expiration_date
      - questionnaire_id
      - questionnaire_template_id
      - resubmit_allowed
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - expiration_date
      - questionnaire_id
      - questionnaire_template_id
      - resubmit_allowed
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - expiration_date
      - questionnaire_id
      - questionnaire_template_id
      - resubmit_allowed
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - expiration_date
      - questionnaire_id
      - questionnaire_template_id
      - resubmit_allowed
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: role
  array_relationships:
  - name: granted_roles
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_role
        column_mapping:
          resource_path: resource_path
          role_id: role_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - is_system
      - role_id
      - role_name
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - is_system
      - role_id
      - role_name
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: scheduler
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - end_date
      - freq
      - scheduler_id
      - start_date
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - end_date
      - freq
      - scheduler_id
      - start_date
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - end_date
      - freq
      - scheduler_id
      - start_date
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - end_date
      - freq
      - scheduler_id
      - start_date
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - end_date
      - freq
      - scheduler_id
      - start_date
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: school_admins
  object_relationships:
  - name: schools
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: schools
        column_mapping:
          school_id: school_id
  - name: users
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          school_admin_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - school_admin_id
      - school_id
      - updated_at
      filter:
        _and:
        - school_admin_id:
            _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - school_admin_id
      - school_id
      - updated_at
      - created_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - school_id
      - school_admin_id
      - created_at
      - updated_at
      filter:
        _and:
        - _or:
          - school_admin_id:
              _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: school_course
  object_relationships:
  - name: school_info
    using:
      foreign_key_constraint_on: school_id
  insert_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - is_archived
      - school_course_id
      - school_course_name
      - school_course_name_phonetic
      - school_course_partner_id
      - school_id
      backend_only: false
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - is_archived
      - school_course_id
      - school_course_name
      - school_course_name_phonetic
      - school_course_partner_id
      - school_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - is_archived
      - school_course_id
      - school_course_name
      - school_course_name_phonetic
      - school_course_partner_id
      - school_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - is_archived
      - school_course_id
      - school_course_name
      - school_course_name_phonetic
      - school_course_partner_id
      - school_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  update_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      columns:
      - is_archived
      - school_course_name
      - school_course_name_phonetic
      - school_course_partner_id
      - school_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: school_history
  object_relationships:
  - name: school_course
    using:
      foreign_key_constraint_on: school_course_id
  - name: school_info
    using:
      foreign_key_constraint_on: school_id
  - name: student
    using:
      foreign_key_constraint_on: student_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - end_date
      - is_current
      - school_course_id
      - school_id
      - start_date
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - end_date
      - is_current
      - school_course_id
      - school_id
      - start_date
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - end_date
      - is_current
      - school_course_id
      - school_id
      - start_date
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: school_info
  object_relationships:
  - name: school_level
    using:
      foreign_key_constraint_on: school_level_id
  insert_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - address
      - is_archived
      - school_id
      - school_level_id
      - school_name
      - school_name_phonetic
      - school_partner_id
      backend_only: false
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - address
      - created_at
      - is_archived
      - school_id
      - school_level_id
      - school_name
      - school_name_phonetic
      - school_partner_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - address
      - created_at
      - is_archived
      - school_id
      - school_level_id
      - school_name
      - school_name_phonetic
      - school_partner_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - address
      - created_at
      - is_archived
      - school_id
      - school_level_id
      - school_name
      - school_name_phonetic
      - school_partner_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  update_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      columns:
      - address
      - is_archived
      - school_level_id
      - school_name
      - school_name_phonetic
      - school_partner_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: school_level
  array_relationships:
  - name: school_infos
    using:
      foreign_key_constraint_on:
        column: school_level_id
        table:
          schema: public
          name: school_info
  insert_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - is_archived
      - school_level_id
      - school_level_name
      - sequence
      backend_only: false
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - is_archived
      - school_level_id
      - school_level_name
      - sequence
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - is_archived
      - school_level_id
      - school_level_name
      - sequence
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - is_archived
      - school_level_id
      - school_level_name
      - sequence
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  update_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      columns:
      - is_archived
      - school_level_name
      - sequence
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: school_level_grade
  insert_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - grade_id
      - school_level_id
      backend_only: false
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - grade_id
      - school_level_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - grade_id
      - school_level_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  update_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      columns:
      - grade_id
      - school_level_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: schools
  object_relationships:
  - name: city
    using:
      foreign_key_constraint_on: city_id
  - name: district
    using:
      foreign_key_constraint_on: district_id
  array_relationships:
  - name: courses
    using:
      foreign_key_constraint_on:
        column: school_id
        table:
          schema: public
          name: courses
  - name: students
    using:
      foreign_key_constraint_on:
        column: school_id
        table:
          schema: public
          name: students
  select_permissions:
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - is_merge
      - is_system_school
      - country
      - city_id
      - district_id
      - school_id
      - point
      - name
      - phone_number
      - created_at
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - is_merge
      - is_system_school
      - city_id
      - district_id
      - school_id
      - point
      - country
      - name
      - phone_number
      - created_at
      - updated_at
      filter:
        school_id:
          _in: X-Hasura-School-Ids
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - is_merge
      - is_system_school
      - country
      - city_id
      - district_id
      - school_id
      - point
      - name
      - phone_number
      - created_at
      - updated_at
      filter:
        school_id:
          _in: X-Hasura-School-Ids
      allow_aggregations: true
- table:
    schema: public
    name: staff
  object_relationships:
  - name: user
    using:
      foreign_key_constraint_on: staff_id
  array_relationships:
  - name: user_access_paths
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          staff_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - auto_create_timesheet
      - created_at
      - deleted_at
      - end_date
      - staff_id
      - start_date
      - updated_at
      - working_status
      filter:
        _and:
        - user_access_paths:
            _and:
            - staff_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.staff.read
            - deleted_at:
                _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - auto_create_timesheet
      - created_at
      - deleted_at
      - end_date
      - staff_id
      - start_date
      - updated_at
      - working_status
      filter:
        _and:
        - user_access_paths:
            _and:
            - staff_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.staff.read
            - deleted_at:
                _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - auto_create_timesheet
      - created_at
      - deleted_at
      - end_date
      - staff_id
      - start_date
      - updated_at
      - working_status
      filter:
        _and:
        - user_access_paths:
            _and:
            - staff_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.staff.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: student_enrollment_status_history
  object_relationships:
  - name: location
    using:
      foreign_key_constraint_on: location_id
  - name: student
    using:
      foreign_key_constraint_on: student_id
  - name: user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          student_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - comment
      - created_at
      - deleted_at
      - end_date
      - enrollment_status
      - location_id
      - start_date
      - student_id
      - updated_at
      - order_id
      - order_sequence_number
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - comment
      - created_at
      - deleted_at
      - end_date
      - enrollment_status
      - location_id
      - resource_path
      - start_date
      - student_id
      - order_id
      - order_sequence_number
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - comment
      - created_at
      - deleted_at
      - end_date
      - enrollment_status
      - location_id
      - resource_path
      - start_date
      - student_id
      - order_id
      - order_sequence_number
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: student_entryexit_records
  object_relationships:
  - name: students
    using:
      foreign_key_constraint_on: student_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - deleted_at
      - entry_at
      - entryexit_id
      - exit_at
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - deleted_at
      - entry_at
      - entryexit_id
      - exit_at
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - deleted_at
      - entry_at
      - entryexit_id
      - exit_at
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: student_parents
  object_relationships:
  - name: parent
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: parents
        column_mapping:
          parent_id: parent_id
  - name: parent_user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          parent_id: user_id
  - name: student
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: students
        column_mapping:
          student_id: student_id
  - name: student_user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          student_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - parent_id
      - relationship
      - student_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - parent_id
      - relationship
      - student_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - parent_id
      - relationship
      - student_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - deleted_at
      - parent_id
      - relationship
      - student_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: student_product
  object_relationships:
  - name: product
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: product
        column_mapping:
          product_id: product_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - product_id
      - product_status
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - product_id
      - product_status
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - product_id
      - product_status
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - product_id
      - product_status
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - product_id
      - product_status
      - student_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: student_qr
  object_relationships:
  - name: students
    using:
      foreign_key_constraint_on: student_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - qr_id
      - qr_url
      - student_id
      - version
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - qr_id
      - qr_url
      - student_id
      - version
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - qr_id
      - qr_url
      - student_id
      - version
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: students
  object_relationships:
  - name: grade
    using:
      foreign_key_constraint_on: grade_id
  - name: school
    using:
      foreign_key_constraint_on: school_id
  - name: user
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          student_id: user_id
  array_relationships:
  - name: user_access_paths
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          student_id: user_id
  - name: student_enrollment_status_histories
    using:
      foreign_key_constraint_on:
        column: student_id
        table:
          schema: public
          name: student_enrollment_status_history
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - additional_data
      - billing_date
      - biography
      - birthday
      - contact_preference
      - created_at
      - current_grade
      - deleted_at
      - enrollment_status
      - grade_id
      - on_trial
      - school_id
      - student_external_id
      - student_id
      - student_note
      - target_university
      - total_question_limit
      - updated_at
      filter:
        _and:
        - user_access_paths:
            _and:
            - students_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.student.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - additional_data
      - billing_date
      - biography
      - birthday
      - created_at
      - current_grade
      - grade_id
      - deleted_at
      - enrollment_status
      - on_trial
      - school_id
      - student_external_id
      - student_id
      - student_note
      - target_university
      - total_question_limit
      - updated_at
      - contact_preference
      filter:
        _and:
        - user_access_paths:
            _and:
            - students_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.student.read
            - deleted_at:
                _is_null: true
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - additional_data
      - billing_date
      - biography
      - birthday
      - created_at
      - current_grade
      - grade_id
      - deleted_at
      - enrollment_status
      - on_trial
      - school_id
      - student_external_id
      - student_id
      - student_note
      - target_university
      - total_question_limit
      - updated_at
      - contact_preference
      filter:
        _and:
        - user_access_paths:
            _and:
            - students_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.student.read
            - deleted_at:
                _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - additional_data
      - billing_date
      - biography
      - birthday
      - created_at
      - current_grade
      - grade_id
      - deleted_at
      - enrollment_status
      - on_trial
      - school_id
      - student_external_id
      - student_id
      - student_note
      - target_university
      - total_question_limit
      - updated_at
      - contact_preference
      filter:
        _and:
        - user_access_paths:
            _and:
            - students_location_permission:
                _and:
                - user_id:
                    _eq: X-Hasura-User-Id
                - permission_name:
                    _eq: user.student.read
            - deleted_at:
                _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: tagged_user
  object_relationships:
  - name: user_tag
    using:
      foreign_key_constraint_on: tag_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - tag_id
      - updated_at
      - user_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - tag_id
      - updated_at
      - user_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - deleted_at
      - tag_id
      - updated_at
      - user_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: tags
  array_relationships:
  - name: info_notifications_tags
    using:
      foreign_key_constraint_on:
        column: tag_id
        table:
          schema: public
          name: info_notifications_tags
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - tag_id
      - tag_name
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_archived:
            _eq: false
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - tag_id
      - tag_name
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_archived:
            _eq: false
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - tag_id
      - tag_name
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_archived:
            _eq: false
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - tag_id
      - tag_name
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_archived:
            _eq: false
      allow_aggregations: true
- table:
    schema: public
    name: teacher_by_school_id
  object_relationships:
  - name: schools
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: schools
        column_mapping:
          school_id: school_id
  - name: teacher_by_school_id
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: teachers
        column_mapping:
          teacher_id: teacher_id
  - name: users
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          teacher_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - school_id
      - teacher_id
      - updated_at
      filter:
        _and:
        - school_id:
            _in: X-Hasura-School-Ids
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - school_id
      - teacher_id
      - created_at
      - updated_at
      filter: {}
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - school_id
      - teacher_id
      - created_at
      - updated_at
      - deleted_at
      filter:
        school_id:
          _in: X-Hasura-School-Ids
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - school_id
      - teacher_id
      - created_at
      - updated_at
      - deleted_at
      filter:
        school_id:
          _in: X-Hasura-School-Ids
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - school_id
      - teacher_id
      - created_at
      - updated_at
      - deleted_at
      filter:
        school_id:
          _in: X-Hasura-School-Ids
      allow_aggregations: true
- table:
    schema: public
    name: teachers
  object_relationships:
  - name: users
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          teacher_id: user_id
  array_relationships:
  - name: teacher_by_school_ids
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: teacher_by_school_id
        column_mapping:
          teacher_id: teacher_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - resource_path
      - school_ids
      - school_name
      - teacher_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - teacher_id
      - school_ids
      - updated_at
      - created_at
      - school_name
      - deleted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - school_ids
      - school_name
      - teacher_id
      - created_at
      - deleted_at
      - updated_at
      - resource_path
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - school_ids
      - school_name
      - teacher_id
      - created_at
      - deleted_at
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - school_ids
      - school_name
      - teacher_id
      - created_at
      - deleted_at
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: user_access_paths
  object_relationships:
  - name: location
    using:
      foreign_key_constraint_on: location_id
  - name: user
    using:
      foreign_key_constraint_on: user_id
  - name: parents_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  - name: parents
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: parents
        column_mapping:
          user_id: parent_id
  - name: staff_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  - name: staff
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: staff
        column_mapping:
          user_id: staff_id
  - name: students_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  - name: students
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: students
        column_mapping:
          user_id: student_id
  - name: user_access_paths_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  - name: users_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: granted_permissions
        column_mapping:
          location_id: location_id
  - name: users
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: users
        column_mapping:
          user_id: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - access_path
      - created_at
      - location_id
      - user_id
      filter:
        _and:
        - user_access_paths_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: user.user.read
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - access_path
      - created_at
      - location_id
      - user_id
      filter:
        _and:
        - user_access_paths_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: user.user.read
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - access_path
      - created_at
      - location_id
      - user_id
      filter:
        _and:
        - user_access_paths_location_permission:
            _and:
            - user_id:
                _eq: X-Hasura-User-Id
            - permission_name:
                _eq: user.user.read
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
- table:
    schema: public
    name: user_address
  object_relationships:
  - name: prefecture
    using:
      foreign_key_constraint_on: prefecture_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - address_type
      - city
      - created_at
      - deleted_at
      - first_street
      - postal_code
      - prefecture_id
      - second_street
      - updated_at
      - user_address_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - address_type
      - city
      - created_at
      - deleted_at
      - first_street
      - postal_code
      - prefecture_id
      - second_street
      - updated_at
      - user_address_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - address_type
      - city
      - created_at
      - deleted_at
      - first_street
      - postal_code
      - prefecture_id
      - second_street
      - updated_at
      - user_address_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: user_basic_info
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - current_grade
      - deleted_at
      - email
      - first_name
      - first_name_phonetic
      - full_name_phonetic
      - gender
      - grade_id
      - last_name
      - last_name_phonetic
      - name
      - updated_at
      - user_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - current_grade
      - deleted_at
      - email
      - first_name
      - first_name_phonetic
      - full_name_phonetic
      - gender
      - grade_id
      - last_name
      - last_name_phonetic
      - name
      - updated_at
      - user_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - current_grade
      - deleted_at
      - email
      - first_name
      - first_name_phonetic
      - full_name_phonetic
      - gender
      - grade_id
      - last_name
      - last_name_phonetic
      - name
      - updated_at
      - user_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - deleted_at:
            _is_null: true
      allow_aggregations: true
- table:
    schema: public
    name: user_group
  array_relationships:
  - name: granted_roles
    using:
      foreign_key_constraint_on:
        column: user_group_id
        table:
          schema: public
          name: granted_role
  - name: user_group_members
    using:
      foreign_key_constraint_on:
        column: user_group_id
        table:
          schema: public
          name: user_group_member
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - is_system
      - updated_at
      - user_group_id
      - user_group_name
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - is_system
      - updated_at
      - user_group_id
      - user_group_name
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: user_group_member
  object_relationships:
  - name: user_group
    using:
      foreign_key_constraint_on: user_group_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - updated_at
      - user_group_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - updated_at
      - user_group_id
      - user_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: user_phone_number
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - phone_number
      - type
      - updated_at
      - user_id
      - user_phone_number_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - phone_number
      - type
      - updated_at
      - user_id
      - user_phone_number_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - deleted_at
      - phone_number
      - type
      - updated_at
      - user_id
      - user_phone_number_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: user_tag
  insert_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      set:
        resource_path: x-hasura-Resource-Path
      columns:
      - is_archived
      - user_tag_id
      - user_tag_name
      - user_tag_partner_id
      - user_tag_type
      backend_only: false
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - is_archived
      - user_tag_id
      - user_tag_name
      - user_tag_partner_id
      - user_tag_type
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - is_archived
      - user_tag_id
      - user_tag_name
      - user_tag_partner_id
      - user_tag_type
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - is_archived
      - user_tag_id
      - user_tag_name
      - user_tag_partner_id
      - user_tag_type
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  update_permissions:
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      check:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      columns:
      - is_archived
      - updated_at
      - user_tag_name
      - user_tag_partner_id
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: users
  object_relationships:
  - name: bank_account
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: bank_account
        column_mapping:
          user_id: student_id
  - name: parent
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: parents
        column_mapping:
          user_id: parent_id
  - name: school_admin
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: school_admins
        column_mapping:
          user_id: school_admin_id
  - name: staff
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: staff
        column_mapping:
          user_id: staff_id
  - name: student
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: students
        column_mapping:
          user_id: student_id
  - name: student_parent
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: student_parents
        column_mapping:
          user_id: student_id
  - name: teacher_by_school_id
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: teacher_by_school_id
        column_mapping:
          user_id: teacher_id
  array_relationships:
  - name: info_notifications
    using:
      foreign_key_constraint_on:
        column: editor_id
        table:
          schema: public
          name: info_notifications
  - name: tagged_users
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: tagged_user
  - name: teachers
    using:
      foreign_key_constraint_on:
        column: teacher_id
        table:
          schema: public
          name: teachers
  - name: user_access_paths
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: user_access_paths
  - name: user_group_members
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: user_group_member
  - name: user_phone_numbers
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: user_phone_number
  - name: users_info_notifications
    using:
      foreign_key_constraint_on:
        column: user_id
        table:
          schema: public
          name: users_info_notifications
  select_permissions:
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - allow_notification
      - avatar
      - country
      - created_at
      - deleted_at
      - device_token
      - email
      - email_verified
      - facebook_id
      - first_name
      - first_name_phonetic
      - full_name_phonetic
      - given_name
      - is_tester
      - last_login_date
      - last_name
      - last_name_phonetic
      - name
      - phone_number
      - phone_verified
      - platform
      - updated_at
      - user_external_id
      - user_group
      - user_id
      - is_system
      - deactivated_at
      - user_role
      - username
      filter:
        _and:
        - _or:
          - user_access_paths:
              _and:
              - users_location_permission:
                  _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - permission_name:
                      _eq: user.user.read
              - deleted_at:
                  _is_null: true
          - user_id:
              _eq: X-Hasura-User-Id
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_system:
            _eq: false
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - allow_notification
      - avatar
      - birthday
      - country
      - created_at
      - deleted_at
      - device_token
      - email
      - email_verified
      - facebook_id
      - first_name
      - first_name_phonetic
      - full_name_phonetic
      - gender
      - given_name
      - is_tester
      - last_login_date
      - last_name
      - last_name_phonetic
      - name
      - phone_number
      - phone_verified
      - platform
      - remarks
      - resource_path
      - updated_at
      - user_external_id
      - user_group
      - user_id
      - is_system
      - deactivated_at
      - user_role
      - username
      filter:
        _and:
        - _or:
          - user_access_paths:
              _and:
              - users_location_permission:
                  _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - permission_name:
                      _eq: user.user.read
              - deleted_at:
                  _is_null: true
          - user_id:
              _eq: X-Hasura-User-Id
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_system:
            _eq: false
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - allow_notification
      - avatar
      - birthday
      - country
      - created_at
      - deleted_at
      - device_token
      - email
      - email_verified
      - facebook_id
      - first_name
      - first_name_phonetic
      - full_name_phonetic
      - gender
      - given_name
      - is_tester
      - last_login_date
      - last_name
      - last_name_phonetic
      - name
      - phone_number
      - phone_verified
      - platform
      - remarks
      - resource_path
      - updated_at
      - user_external_id
      - user_group
      - user_id
      - is_system
      - deactivated_at
      - user_role
      - username
      filter:
        _and:
        - _or:
          - user_access_paths:
              _and:
              - users_location_permission:
                  _and:
                  - user_id:
                      _eq: X-Hasura-User-Id
                  - permission_name:
                      _eq: user.user.read
              - deleted_at:
                  _is_null: true
          - user_id:
              _eq: X-Hasura-User-Id
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
        - is_system:
            _eq: false
      allow_aggregations: true
- table:
    schema: public
    name: users_info_notifications
  object_relationships:
  - name: info_notification
    using:
      foreign_key_constraint_on: notification_id
  - name: student
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: students
        column_mapping:
          user_id: student_id
  - name: student_parent
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: student_parents
        column_mapping:
          user_id: student_id
  - name: user
    using:
      foreign_key_constraint_on: user_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - course_ids
      - created_at
      - current_grade
      - deleted_at
      - is_individual
      - notification_id
      - parent_id
      - qn_status
      - status
      - student_id
      - updated_at
      - user_group
      - user_id
      - user_notification_id
      - student_name
      - parent_name
      - grade_id
      - qn_submitted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - course_ids
      - created_at
      - current_grade
      - deleted_at
      - is_individual
      - notification_id
      - parent_id
      - qn_status
      - status
      - student_id
      - updated_at
      - user_group
      - user_id
      - user_notification_id
      - student_name
      - parent_name
      - grade_id
      - qn_submitted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - course_ids
      - created_at
      - current_grade
      - deleted_at
      - is_individual
      - notification_id
      - parent_id
      - qn_status
      - status
      - student_id
      - updated_at
      - user_group
      - user_id
      - user_notification_id
      - student_name
      - parent_name
      - grade_id
      - qn_submitted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - course_ids
      - created_at
      - current_grade
      - deleted_at
      - is_individual
      - notification_id
      - parent_id
      - qn_status
      - status
      - student_id
      - updated_at
      - user_group
      - user_id
      - user_notification_id
      - student_name
      - parent_name
      - grade_id
      - qn_submitted_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: package_course
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - course_id
      - course_weight
      - created_at
      - mandatory_flag
      - max_slots_per_course
      - package_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - course_id
      - course_weight
      - created_at
      - mandatory_flag
      - max_slots_per_course
      - package_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - course_id
      - course_weight
      - created_at
      - mandatory_flag
      - max_slots_per_course
      - package_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - course_id
      - course_weight
      - created_at
      - mandatory_flag
      - max_slots_per_course
      - package_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - course_id
      - course_weight
      - created_at
      - mandatory_flag
      - max_slots_per_course
      - package_id
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: product
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - available_from
      - available_until
      - billing_schedule_id
      - created_at
      - custom_billing_period
      - disable_pro_rating_flag
      - is_archived
      - is_unique
      - name
      - product_id
      - product_tag
      - product_type
      - remarks
      - tax_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - available_from
      - available_until
      - billing_schedule_id
      - created_at
      - custom_billing_period
      - disable_pro_rating_flag
      - is_archived
      - is_unique
      - name
      - product_id
      - product_tag
      - product_type
      - remarks
      - tax_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - available_from
      - available_until
      - billing_schedule_id
      - created_at
      - custom_billing_period
      - disable_pro_rating_flag
      - is_archived
      - is_unique
      - name
      - product_id
      - product_tag
      - product_type
      - remarks
      - tax_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - available_from
      - available_until
      - billing_schedule_id
      - created_at
      - custom_billing_period
      - disable_pro_rating_flag
      - is_archived
      - is_unique
      - name
      - product_id
      - product_tag
      - product_type
      - remarks
      - tax_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - available_from
      - available_until
      - billing_schedule_id
      - created_at
      - custom_billing_period
      - disable_pro_rating_flag
      - is_archived
      - is_unique
      - name
      - product_id
      - product_tag
      - product_type
      - remarks
      - tax_id
      - updated_at
      filter:
        _and:
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: granted_permissions
  object_relationships:
  - name: parents_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          location_id: location_id
  - name: staff_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          location_id: location_id
  - name: students_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          location_id: location_id
  - name: user_access_paths_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          location_id: location_id
  - name: users_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: user_access_paths
        column_mapping:
          location_id: location_id
  - name: locations_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: locations
        column_mapping:
          location_id: location_id
  - name: info_notifications_location_permission
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: info_notifications_access_paths
        column_mapping:
          location_id: location_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - user_id
      - permission_name
      - location_id
      - permission_id
      filter:
        _and:
        - user_id:
            _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - user_id
      - permission_name
      - location_id
      - permission_id
      filter:
        _and:
        - user_id:
            _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - user_id
      - permission_name
      - location_id
      - permission_id
      filter:
        _and:
        - user_id:
            _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - user_id
      - permission_name
      - location_id
      - permission_id
      filter:
        _and:
        - user_id:
            _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - user_id
      - permission_name
      - location_id
      - permission_id
      filter:
        _and:
        - user_id:
            _eq: X-Hasura-User-Id
        - resource_path:
            _eq: X-Hasura-Resource-Path
- table:
    schema: public
    name: subject
  object_relationships:
  - name: course_subject
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: course_subject
        column_mapping:
          subject_id: subject_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - deleted_at
      - name
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - name
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - deleted_at
      - name
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - created_at
      - deleted_at
      - name
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - deleted_at
      - name
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: course_subject
  object_relationships:
  - name: subject
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: subject
        column_mapping:
          subject_id: subject_id
  array_relationships:
  - name: courses
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: courses
        column_mapping:
          course_id: course_id
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_STAFF
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - course_id
      - created_at
      - deleted_at
      - subject_id
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: questionnaire_template_questions
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - choices
      - created_at
      - is_required
      - order_index
      - questionnaire_template_id
      - questionnaire_template_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - choices
      - created_at
      - is_required
      - order_index
      - questionnaire_template_id
      - questionnaire_template_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - choices
      - created_at
      - is_required
      - order_index
      - questionnaire_template_id
      - questionnaire_template_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - choices
      - created_at
      - is_required
      - order_index
      - questionnaire_template_id
      - questionnaire_template_question_id
      - title
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
- table:
    schema: public
    name: questionnaire_templates
  select_permissions:
  - role: MANABIE
    permission:
      columns:
      - created_at
      - expiration_date
      - name
      - questionnaire_template_id
      - resubmit_allowed
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_ADMIN
    permission:
      columns:
      - created_at
      - expiration_date
      - name
      - questionnaire_template_id
      - resubmit_allowed
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
  - role: USER_GROUP_SCHOOL_ADMIN
    permission:
      columns:
      - created_at
      - expiration_date
      - name
      - questionnaire_template_id
      - resubmit_allowed
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
  - role: USER_GROUP_TEACHER
    permission:
      columns:
      - created_at
      - expiration_date
      - name
      - questionnaire_template_id
      - resubmit_allowed
      - type
      - updated_at
      filter:
        _and:
        - deleted_at:
            _is_null: true
        - resource_path:
            _eq: X-Hasura-Resource-Path
      allow_aggregations: true
